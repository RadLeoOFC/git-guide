# Git Hooks и автоматизация

Git Hooks — это скрипты, которые Git выполняет при определённых событиях (коммит, push, merge и т.д.).  
Они помогают автоматизировать проверки, форматирование кода, деплой и многое другое.

---

## Виды хуков

| Хук              | Когда срабатывает                                   | Применение |
|------------------|----------------------------------------------------|------------|
| `pre-commit`     | Перед созданием коммита                            | Линтеры, форматтеры, тесты |
| `commit-msg`     | После ввода сообщения коммита                      | Проверка формата сообщений |
| `pre-push`       | Перед отправкой на удалённый репозиторий            | Запуск тестов, сборки |
| `pre-rebase`     | Перед ребейзом                                     | Предотвращение конфликтов |
| `post-merge`     | После слияния                                      | Установка зависимостей, билд |
| `post-checkout`  | После переключения ветки                           | Автоматическая настройка окружения |

---

## Локальные хуки

Хранятся в `.git/hooks` (по умолчанию — примеры с `.sample`).

Пример `pre-commit` для запуска линтера:
```bash
#!/bin/sh
echo "Запуск линтера..."
npm run lint
```
> Сделать исполняемым: `chmod +x .git/hooks/pre-commit`

---

## Общие хуки в команде

Чтобы хук был у всех разработчиков, используйте:
- **Husky** (JavaScript/Node.js)
- **pre-commit** (Python)
- **lefthook** (мультиплатформенный)

Пример Husky:
```bash
npx husky install
npx husky add .husky/pre-commit "npm run lint"
```

---

## Автоматизация с CI/CD

Часть проверок стоит дублировать в CI:
- GitHub Actions
- GitLab CI
- Jenkins

Например, GitHub Actions:
```yaml
name: CI
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm install
      - run: npm test
```

➡️ [Следующий раздел: Частые ошибки и их исправление](10-common-errors.md)
